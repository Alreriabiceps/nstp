import{D as f,o as c,c as h,T as C,h as $,f as r,a,u as n,w as I,F as v,Z as Y,b as e,d as w,e as U,q as u,C as A,A as g,k as P,g as D,t as m,E as z}from"./app-B6O6sYq6.js";import{_ as L}from"./AuthenticatedLayout-D4MOsGUk.js";import{_ as x}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as p,a as F}from"./InputLabel-Bs4jbW8b.js";const O={};function R(d,i){const s=f("font-awesome-icon");return c(),h(s,{icon:"fa-solid fa-pencil"})}const Z=x(O,[["render",R]]),G={};function H(d,i){const s=f("font-awesome-icon");return c(),h(s,{icon:"fa-solid fa-trash"})}const J=x(G,[["render",H]]),K={};function Q(d,i){const s=f("font-awesome-icon");return c(),h(s,{icon:"fa-solid fa-eye"})}const W=x(K,[["render",Q]]),X={};function ee(d,i){const s=f("font-awesome-icon");return c(),h(s,{icon:"fa-solid fa-download"})}const te=x(X,[["render",ee]]),se={};function oe(d,i){const s=f("font-awesome-icon");return c(),h(s,{icon:"fa-solid fa-file-upload"})}const ne=x(se,[["render",oe]]),ae={};function ce(d,i){const s=f("font-awesome-icon");return c(),h(s,{icon:"fa-solid fa-plus"})}const ie=x(ae,[["render",ce]]),de={};function re(d,i){const s=f("font-awesome-icon");return c(),h(s,{icon:"fa-solid fa-filter"})}const le=x(de,[["render",re]]),ue={};function _e(d,i){const s=f("font-awesome-icon");return c(),h(s,{icon:"fa-solid fa-list-dots"})}const me=x(ue,[["render",_e]]),pe=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Students ",-1),fe={class:"py-12"},he={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},xe={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},ge={class:"flex justify-end space-x-2 p-2"},we={href:"/students/create",type:"button",class:"py-2 px-2 bg-blue-500 hover:bg-blue-700 text-white rounded text-sm"},ye={href:"/students/upload",type:"button",class:"py-2 px-2 bg-lime-500 hover:bg-lime-700 text-white rounded text-sm"},be={class:"p-2"},ve={class:"flex mb-4"},Se={class:"w-1/2"},ke={class:"flex mb-4 space-x-4"},Ce={class:"w-1/3"},$e=e("option",{value:"",hidden:""}," Please Select Course ",-1),Ue=["value"],Pe={class:"w-1/3"},Fe=e("option",{value:"",hidden:""}," Please Select Semester ",-1),Ve=e("option",{value:"first"}," First Semester ",-1),Ie=e("option",{value:"second"}," Second Semester ",-1),Ae=[Fe,Ve,Ie],De={class:"flex mb-4 space-x-4"},Be={class:"w-1/3"},Te=e("option",{value:"",hidden:""}," Please Select School Year ",-1),je=["value"],Ne={class:"w-1/3"},Me=e("option",{value:"",hidden:""}," Please Select Status ",-1),qe=e("option",{value:"complete"}," Complete ",-1),Ee=e("option",{value:"incomplete"}," Incomplete ",-1),Ye=[Me,qe,Ee],ze={type:"submit",class:"py-2 px-2 bg-blue-500 hover:bg-blue-700 text-white rounded"},Le={class:"flex justify-start space-x-2 p-2"},Oe={key:0},Re={class:"fixed inset-0 flex items-center justify-center z-50"},Ze={class:"bg-white rounded-lg p-8"},Ge=e("h2",{class:"text-xl font-semibold mb-4"}," Download Certificate ",-1),He={class:"mb-4"},Je={class:"flex justify-end"},Ke=e("button",{type:"submit",class:"py-2 px-4 bg-indigo-500 hover:bg-indigo-700 text-white rounded text-sm"}," Download ",-1),Qe=e("div",{class:"fixed inset-0 bg-black opacity-50"},null,-1),We={key:1},Xe={class:"fixed inset-0 flex items-center justify-center z-50"},et={class:"bg-white rounded-lg p-8"},tt=e("h2",{class:"text-xl font-semibold mb-4"}," Update Status ",-1),st={class:"mb-4"},ot=e("label",{for:"first_semester",value:"First Semester"},null,-1),nt=e("option",{value:"",hidden:""}," Please Select Status ",-1),at=e("option",{value:"passed"}," Passed ",-1),ct=e("option",{value:"failed"}," Failed ",-1),it=[nt,at,ct],dt={class:"mb-4"},rt=e("option",{value:"",hidden:""}," Please Select Status ",-1),lt=e("option",{value:"passed"}," Passed ",-1),ut=e("option",{value:"failed"}," Failed ",-1),_t=[rt,lt,ut],mt={class:"flex justify-end"},pt=e("button",{type:"submit",class:"py-2 px-4 bg-pink-500 hover:bg-pink-700 text-white rounded text-sm"}," Update ",-1),ft=e("div",{class:"fixed inset-0 bg-black opacity-50"},null,-1),ht={class:"w-full divide-y divide-gray-200"},xt=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-2 text-left text-sm font-medium text-gray-500 uppercase tracking-wider"}),e("th",{scope:"col",class:"px-6 py-2 text-left text-sm ont-medium text-gray-500 uppercase tracking-wider"}," Seq. No. "),e("th",{scope:"col",class:"px-6 py-2 text-left text-sm font-medium text-gray-500 uppercase tracking-wider"}," Student ID "),e("th",{scope:"col",class:"px-6 py-2 text-left text-sm font-medium text-gray-500 uppercase tracking-wider"}," Name "),e("th",{scope:"col",class:"px-6 py-2 text-left text-sm font-medium text-gray-500 uppercase tracking-wider"}," Course "),e("th",{scope:"col",class:"px-6 py-2 text-left text-sm font-medium text-gray-500 uppercase tracking-wider"}," NSTP Type "),e("th",{scope:"col",class:"px-6 py-2 text-left text-sm font-medium text-gray-500 uppercase tracking-wider"}," School Year "),e("th",{scope:"col",class:"px-6 py-2 text-left text-sm font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{scope:"col",class:"px-6 py-2 text-left text-sm font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1),gt={class:"bg-white divide-y divide-gray-200"},wt={class:"px-2 py-1 whitespace-nowrap"},yt=["value"],bt={class:"px-2 py-1 whitespace-nowrap text-xs"},vt={class:"px-2 py-1 whitespace-nowrap text-xs"},St={class:"px-2 py-1 whitespace-nowrap text-sm"},kt={class:"px-2 py-1 whitespace-nowrap text-sm"},Ct={class:"px-2 py-1 whitespace-nowrap text-xs"},$t={class:"px-2 py-1 whitespace-nowrap text-xs"},Ut={class:"px-2 py-1 whitespace-nowrap text-xs"},Pt={key:0,class:"text-green-500"},Ft={key:1,class:"text-red-500"},Vt={class:"px-2 py-1 whitespace-nowrap text-sm space-x-2"},It=["href"],At=["href"],Dt=["onClick"],Mt={__name:"Index",props:{courses:{type:Array,default:[]},students:{type:Array,default:[]},graduationYears:{type:Array,default:[]},search:String,course_id:String,semester:String,school_year:String,status:String},setup(d){const i=d,s=C({student_ids:[],certificate_date:null,first_sem_status:"",second_sem_status:""}),B=()=>{if(s.student_ids.length===0){alert("Please select students to download certificate.");return}y.value=!0},T=()=>{if(s.student_ids.length===0){alert("Please select students to update status.");return}b.value=!0},y=$(!1),S=$(!1),b=$(!1),j=async()=>{try{const _=await axios.post(route("certificates.download"),s.data(),{responseType:"blob"}),o=window.URL.createObjectURL(new Blob([_.data])),t=document.createElement("a");t.href=o,t.setAttribute("download","certificates.zip"),document.body.appendChild(t),t.click(),document.body.removeChild(t),s.reset(),y.value=!1}catch(_){console.error("Error downloading certificates:",_)}},N=()=>{S.value?s.student_ids=[]:s.student_ids=i.students.map(_=>_.id),S.value=!S.value},l=C({search:i.search||"",course_id:i.course_id||"",semester:i.semester||"",school_year:i.school_year||"",status:i.status||""}),M=()=>{l.get(route("students.index"),{preserveState:!0,preserveScroll:!0})},k=C({}),q=_=>{confirm("Are you sure you want to delete this student?")&&k.delete(`/students/${_}`)},E=()=>{s.post(route("students-update-status"),{onStart:()=>{k.processing=!0},onFinish:()=>{k.processing=!1},onSuccess:()=>{b.value=!1,s.reset(),alert("Update Successful")}})};return(_,o)=>(c(),r(v,null,[a(n(Y),{title:"Students"}),a(L,null,{header:I(()=>[pe]),default:I(()=>[e("div",fe,[e("div",he,[e("div",xe,[e("div",ge,[e("a",we,[a(ie,{class:"h-4 w-5"}),w(" Add Student")]),e("a",ye,[a(ne,{class:"h-4 w-5"}),w(" Batch Upload")])]),e("div",be,[e("form",{onSubmit:U(M,["prevent"]),method:"POST"},[e("div",ve,[e("div",Se,[a(p,{for:"search",value:"Search"}),u(e("input",{id:"search",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm block mt-1 w-full",type:"text",name:"search",placeholder:"Search","onUpdate:modelValue":o[0]||(o[0]=t=>n(l).search=t)},null,512),[[A,n(l).search]])])]),e("div",ke,[e("div",Ce,[a(p,{for:"course",value:"Course/Program"}),u(e("select",{id:"course",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm block mt-1 w-full",name:"course_id","onUpdate:modelValue":o[1]||(o[1]=t=>n(l).course_id=t),required:""},[$e,(c(!0),r(v,null,P(d.courses,t=>(c(),r("option",{value:t.id,key:t.id},m(t.name),9,Ue))),128))],512),[[g,n(l).course_id]])]),e("div",Pe,[a(p,{for:"semester",value:"Semester"}),u(e("select",{id:"semester",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm block mt-1 w-full",name:"semester",value:"","onUpdate:modelValue":o[2]||(o[2]=t=>n(l).semester=t)},Ae,512),[[g,n(l).semester]])])]),e("div",De,[e("div",Be,[a(p,{for:"school_year",value:"School Year"}),u(e("select",{id:"school_year",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm block mt-1 w-full",name:"school_year",value:"","onUpdate:modelValue":o[3]||(o[3]=t=>n(l).school_year=t)},[Te,(c(!0),r(v,null,P(d.graduationYears,t=>(c(),r("option",{key:t,value:t},m(t),9,je))),128))],512),[[g,n(l).school_year]])]),e("div",Ne,[a(p,{for:"status",value:"Status"}),u(e("select",{id:"status",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm block mt-1 w-full",name:"status",value:"","onUpdate:modelValue":o[4]||(o[4]=t=>n(l).status=t)},Ye,512),[[g,n(l).status]])])]),e("button",ze,[w(" Filter "),a(le,{class:"h-4 w-4"})])],32)]),e("div",Le,[e("button",{onClick:N,type:"button",class:"py-2 px-2 bg-gray-500 hover:bg-gray-700 text-white rounded text-sm"},[a(me,{class:"h-4 w-4"}),w(" Select all ")]),e("a",{href:"#",onClick:T,id:"updateStatusButton",class:"py-2 px-2 bg-pink-500 hover:bg-pink-700 text-white rounded text-sm"},"Update Status"),e("a",{href:"#",onClick:B,id:"downloadCertificateButton",class:"py-2 px-2 bg-indigo-500 hover:bg-indigo-700 text-white rounded text-sm"},[a(te,{class:"h-4 w-4"}),w(" Download Certificate ")])]),y.value?(c(),r("div",Oe,[e("div",Re,[e("div",Ze,[Ge,e("form",{onSubmit:U(j,["prevent"])},[e("div",He,[a(p,{for:"certificate_date",value:"Certificate Date"}),u(e("input",{id:"certificate_date","onUpdate:modelValue":o[5]||(o[5]=t=>n(s).certificate_date=t),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm block mt-1 w-full",type:"date",required:""},null,512),[[A,n(s).certificate_date]]),a(F,{class:"mt-2",message:n(s).errors.certificate_date},null,8,["message"])]),e("div",Je,[e("button",{type:"button",class:"py-2 px-4 bg-gray-500 hover:bg-gray-700 text-white rounded text-sm mr-2",onClick:o[6]||(o[6]=t=>y.value=!1)}," Cancel "),Ke])],32)])]),Qe])):D("",!0),b.value?(c(),r("div",We,[e("div",Xe,[e("div",et,[tt,e("form",{onSubmit:U(E,["prevent"]),method:"POST"},[e("div",st,[ot,a(p,{for:"first_semester",value:"First Semester"}),u(e("select",{id:"first_semester",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm block mt-1 w-full",name:"first_semester","onUpdate:modelValue":o[7]||(o[7]=t=>n(s).first_sem_status=t)},it,512),[[g,n(s).first_sem_status]]),a(F,{class:"mt-2",message:n(s).errors.first_sem_status},null,8,["message"])]),e("div",dt,[a(p,{for:"second_semester",value:"Second Semester"}),u(e("select",{id:"second_semester",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm block mt-1 w-full",name:"second_semester","onUpdate:modelValue":o[8]||(o[8]=t=>n(s).second_sem_status=t)},_t,512),[[g,n(s).second_sem_status]]),a(F,{class:"mt-2",message:n(s).errors.second_sem_status},null,8,["message"])]),e("div",mt,[e("button",{type:"button",class:"py-2 px-4 bg-gray-500 hover:bg-gray-700 text-white rounded text-sm mr-2",onClick:o[9]||(o[9]=t=>b.value=!1)}," Cancel "),pt])],32)])]),ft])):D("",!0),e("table",ht,[xt,e("tbody",gt,[(c(!0),r(v,null,P(d.students,t=>(c(),r("tr",{key:t.id},[e("td",wt,[u((c(),r("input",{key:t.id,type:"checkbox",class:"form-checkbox h-4 w-4 text-blue-500 rounded","onUpdate:modelValue":o[10]||(o[10]=V=>n(s).student_ids=V),value:t.id},null,8,yt)),[[z,n(s).student_ids]])]),e("td",bt,m(t.seq_no),1),e("td",vt,m(t.student_id),1),e("td",St,m(t.last_name+", "+t.first_name+" "+t.middle_name),1),e("td",kt,m(t.course?t.course.code:""),1),e("td",Ct,m(t.enrollment_type),1),e("td",$t,m(t.enrollment_year),1),e("td",Ut,[t.first_sem_status&&t.second_sem_status?(c(),r("div",Pt," Complete ")):(c(),r("div",Ft," Incomplete "))]),e("td",Vt,[e("a",{href:`/students/${t.id}`,class:"text-blue-500 hover:text-blue-700"},[a(W,{class:"h-4 w-4"})],8,It),e("a",{href:`/students/${t.id}/edit`,class:"text-green-500 hover:text-green-700"},[a(Z,{class:"h-4 w-4"})],8,At),e("a",{href:"#",onClick:V=>q(t.id),class:"text-red-400 hover:text-red-600"},[a(J,{class:"h-4 w-4"})],8,Dt)])]))),128))])])])])])]),_:1})],64))}};export{Mt as default};
