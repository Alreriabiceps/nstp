import{D as _,o as n,c as m,T as C,h as $,f as r,a,u as c,w as V,F as b,Z as T,b as e,d as w,e as U,q as x,C as A,A as v,k as I,g as D,E as M,t as p,G as Y}from"./app-BMcZYT5L.js";import{_ as L}from"./AuthenticatedLayout-D_Dzh1g9.js";import{_ as f}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as y}from"./InputLabel-UfCaSRe_.js";const z={};function R(d,u){const s=_("font-awesome-icon");return n(),m(s,{icon:"fa-solid fa-pencil"})}const O=f(z,[["render",R]]),G={};function W(d,u){const s=_("font-awesome-icon");return n(),m(s,{icon:"fa-solid fa-trash"})}const Z=f(G,[["render",W]]),H={};function J(d,u){const s=_("font-awesome-icon");return n(),m(s,{icon:"fa-solid fa-eye"})}const K=f(H,[["render",J]]),Q={};function X(d,u){const s=_("font-awesome-icon");return n(),m(s,{icon:"fa-solid fa-download"})}const ee=f(Q,[["render",X]]),te={};function se(d,u){const s=_("font-awesome-icon");return n(),m(s,{icon:"fa-solid fa-file-upload"})}const oe=f(te,[["render",se]]),ne={};function ae(d,u){const s=_("font-awesome-icon");return n(),m(s,{icon:"fa-solid fa-plus"})}const ce=f(ne,[["render",ae]]),ie={};function de(d,u){const s=_("font-awesome-icon");return n(),m(s,{icon:"fa-solid fa-filter"})}const re=f(ie,[["render",de]]),le={};function ue(d,u){const s=_("font-awesome-icon");return n(),m(s,{icon:"fa-solid fa-list-dots"})}const _e=f(le,[["render",ue]]),pe=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Students ",-1),me={class:"py-12"},fe={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},he={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},xe={class:"flex justify-end space-x-2 p-2"},we={href:"/students/create",type:"button",class:"py-2 px-2 bg-blue-500 hover:bg-blue-700 text-white rounded text-sm"},ye={href:"/students/upload",type:"button",class:"py-2 px-2 bg-lime-500 hover:bg-lime-700 text-white rounded text-sm"},ge={class:"p-2"},be={class:"flex mb-4"},ve={class:"w-1/2"},Se={class:"flex mb-4 space-x-4"},ke={class:"w-1/3"},Ce=e("option",{value:"",hidden:""}," Please Select Course ",-1),$e=["value"],Ue={class:"w-1/3"},Ie=e("option",{value:"",hidden:""}," Please Select Semester ",-1),Pe=e("option",{value:"first"}," First Semester ",-1),Ve=e("option",{value:"second"}," Second Semester ",-1),Ae=[Ie,Pe,Ve],De={class:"flex mb-4 space-x-4"},Fe={class:"w-1/3"},Be=e("option",{value:"",hidden:""}," Please Select School Year ",-1),je=["value"],qe={class:"w-1/3"},Ee=e("option",{value:"",hidden:""}," Please Select Status ",-1),Ne=e("option",{value:"complete"}," Complete ",-1),Te=e("option",{value:"incomplete"}," Incomplete ",-1),Me=[Ee,Ne,Te],Ye={type:"submit",class:"py-2 px-2 bg-blue-500 hover:bg-blue-700 text-white rounded"},Le={class:"flex justify-start space-x-2 p-2"},ze={key:0},Re={class:"fixed inset-0 flex items-center justify-center z-50"},Oe={class:"bg-white rounded-lg p-8"},Ge=e("h2",{class:"text-xl font-semibold mb-4"}," Download Certificate ",-1),We={class:"mb-4"},Ze=e("label",{for:"certificate_date",value:"Certificate Date"},null,-1),He={class:"flex justify-end"},Je=e("button",{type:"submit",class:"py-2 px-4 bg-indigo-500 hover:bg-indigo-700 text-white rounded text-sm"}," Download ",-1),Ke=e("div",{class:"fixed inset-0 bg-black opacity-50"},null,-1),Qe={key:1},Xe={class:"fixed inset-0 flex items-center justify-center z-50"},et={class:"bg-white rounded-lg p-8"},tt=e("h2",{class:"text-xl font-semibold mb-4"}," Update Status ",-1),st=e("div",{class:"mb-4"},[e("label",{for:"search",value:"Search"})],-1),ot={class:"flex justify-end"},nt=e("button",{type:"submit",class:"py-2 px-4 bg-pink-500 hover:bg-pink-700 text-white rounded text-sm"}," Update ",-1),at=e("div",{class:"fixed inset-0 bg-black opacity-50"},null,-1),ct={class:"w-full divide-y divide-gray-200"},it=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-2 text-left text-sm font-medium text-gray-500 uppercase tracking-wider"}),e("th",{scope:"col",class:"px-6 py-2 text-left text-sm ont-medium text-gray-500 uppercase tracking-wider"}," Seq. No. "),e("th",{scope:"col",class:"px-6 py-2 text-left text-sm font-medium text-gray-500 uppercase tracking-wider"}," Student ID "),e("th",{scope:"col",class:"px-6 py-2 text-left text-sm font-medium text-gray-500 uppercase tracking-wider"}," Name "),e("th",{scope:"col",class:"px-6 py-2 text-left text-sm font-medium text-gray-500 uppercase tracking-wider"}," Course "),e("th",{scope:"col",class:"px-6 py-2 text-left text-sm font-medium text-gray-500 uppercase tracking-wider"}," NSTP Type "),e("th",{scope:"col",class:"px-6 py-2 text-left text-sm font-medium text-gray-500 uppercase tracking-wider"}," School Year "),e("th",{scope:"col",class:"px-6 py-2 text-left text-sm font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{scope:"col",class:"px-6 py-2 text-left text-sm font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1),dt={class:"bg-white divide-y divide-gray-200"},rt={class:"px-2 py-1 whitespace-nowrap"},lt=["value"],ut={class:"px-2 py-1 whitespace-nowrap text-xs"},_t={class:"px-2 py-1 whitespace-nowrap text-xs"},pt={class:"px-2 py-1 whitespace-nowrap text-sm"},mt={class:"px-2 py-1 whitespace-nowrap text-sm"},ft={class:"px-2 py-1 whitespace-nowrap text-xs"},ht={class:"px-2 py-1 whitespace-nowrap text-xs"},xt={class:"px-2 py-1 whitespace-nowrap text-xs"},wt={key:0,class:"text-green-500"},yt={key:1,class:"text-red-500"},gt={class:"px-2 py-1 whitespace-nowrap text-sm space-x-2"},bt=["href"],vt=["href"],St=["href"],It={__name:"Index",props:{courses:{type:Array,default:[]},students:{type:Array,default:[]},graduationYears:{type:Array,default:[]}},setup(d){const u=d,s=C({student_ids:[],certificate_date:null}),P=C({student_ids:[],status:null}),F=()=>{if(s.student_ids.length===0){alert("Please select students to download certificate.");return}g.value=!0},B=()=>{k.value=!0},g=$(!1),S=$(!1),k=$(!1),j=async()=>{try{const l=await axios.post(route("certificates.download"),s.data(),{responseType:"blob"}),o=window.URL.createObjectURL(new Blob([l.data])),h=document.createElement("a");h.href=o,h.setAttribute("download","certificates.zip"),document.body.appendChild(h),h.click(),document.body.removeChild(h),s.reset(),g.value=!1}catch(l){console.error("Error downloading certificates:",l)}},q=()=>{S.value?(s.student_ids=[],P.student_ids=[]):(s.student_ids=u.students.map(l=>l.id),P.student_ids=u.students.map(l=>l.id)),S.value=!S.value},i=C({search:"",course_id:"",semester:"",school_year:"",status:""}),E=()=>{const o=`students?${new URLSearchParams({search:i.search,course_id:i.course_id,semester:i.semester,school_year:i.school_year,status:i.status}).toString()}`;M.visit(o,{preserveScroll:!0,preserveState:!0,replace:!0})};return(l,o)=>{const h=_("InputError");return n(),r(b,null,[a(c(T),{title:"Students"}),a(L,null,{header:V(()=>[pe]),default:V(()=>[e("div",me,[e("div",fe,[e("div",he,[e("div",xe,[e("a",we,[a(ce,{class:"h-4 w-5"}),w(" Add Student")]),e("a",ye,[a(oe,{class:"h-4 w-5"}),w(" Batch Upload")])]),e("div",ge,[e("form",{onSubmit:U(E,["prevent"]),method:"POST"},[e("div",be,[e("div",ve,[a(y,{for:"search",value:"Search"}),x(e("input",{id:"search",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm block mt-1 w-full",type:"text",name:"search",placeholder:"Search","onUpdate:modelValue":o[0]||(o[0]=t=>c(i).search=t)},null,512),[[A,c(i).search]])])]),e("div",Se,[e("div",ke,[a(y,{for:"course",value:"Course/Program"}),x(e("select",{id:"course",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm block mt-1 w-full",name:"course_id","onUpdate:modelValue":o[1]||(o[1]=t=>c(i).course_id=t),required:""},[Ce,(n(!0),r(b,null,I(d.courses,t=>(n(),r("option",{value:t.id,key:t.id},p(t.name),9,$e))),128))],512),[[v,c(i).course_id]])]),e("div",Ue,[a(y,{for:"semester",value:"Semester"}),x(e("select",{id:"semester",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm block mt-1 w-full",name:"semester",value:"","onUpdate:modelValue":o[2]||(o[2]=t=>c(i).semester=t)},Ae,512),[[v,c(i).semester]])])]),e("div",De,[e("div",Fe,[a(y,{for:"school_year",value:"School Year"}),x(e("select",{id:"school_year",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm block mt-1 w-full",name:"school_year",value:"","onUpdate:modelValue":o[3]||(o[3]=t=>c(i).school_year=t)},[Be,(n(!0),r(b,null,I(d.graduationYears,t=>(n(),r("option",{key:t,value:t},p(t),9,je))),128))],512),[[v,c(i).school_year]])]),e("div",qe,[a(y,{for:"status",value:"Status"}),x(e("select",{id:"status",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm block mt-1 w-full",name:"status",value:"","onUpdate:modelValue":o[4]||(o[4]=t=>c(i).status=t)},Me,512),[[v,c(i).status]])])]),e("button",Ye,[w(" Filter "),a(re,{class:"h-4 w-4"})])],32)]),e("div",Le,[e("button",{onClick:q,type:"button",class:"py-2 px-2 bg-gray-500 hover:bg-gray-700 text-white rounded text-sm"},[a(_e,{class:"h-4 w-4"}),w(" Select all ")]),e("a",{href:"#",onClick:B,id:"updateStatusButton",class:"py-2 px-2 bg-pink-500 hover:bg-pink-700 text-white rounded text-sm"},"Update Status"),e("a",{href:"#",onClick:F,id:"downloadCertificateButton",class:"py-2 px-2 bg-indigo-500 hover:bg-indigo-700 text-white rounded text-sm"},[a(ee,{class:"h-4 w-4"}),w(" Download Certificate ")])]),g.value?(n(),r("div",ze,[e("div",Re,[e("div",Oe,[Ge,e("form",{onSubmit:U(j,["prevent"])},[e("div",We,[Ze,x(e("input",{id:"certificate_date","onUpdate:modelValue":o[5]||(o[5]=t=>c(s).certificate_date=t),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm block mt-1 w-full",type:"date",required:""},null,512),[[A,c(s).certificate_date]]),a(h,{class:"mt-2",message:c(s).errors.certificate_date},null,8,["message"])]),e("div",He,[e("button",{type:"button",class:"py-2 px-4 bg-gray-500 hover:bg-gray-700 text-white rounded text-sm mr-2",onClick:o[6]||(o[6]=t=>g.value=!1)}," Cancel "),Je])],32)])]),Ke])):D("",!0),k.value?(n(),r("div",Qe,[e("div",Xe,[e("div",et,[tt,e("form",{onSubmit:o[8]||(o[8]=U((...t)=>l.statusUpdate&&l.statusUpdate(...t),["prevent"]))},[st,e("div",ot,[e("button",{type:"button",class:"py-2 px-4 bg-gray-500 hover:bg-gray-700 text-white rounded text-sm mr-2",onClick:o[7]||(o[7]=t=>k.value=!1)}," Cancel "),nt])],32)])]),at])):D("",!0),e("table",ct,[it,e("tbody",dt,[(n(!0),r(b,null,I(d.students,t=>(n(),r("tr",{key:t.id},[e("td",rt,[x((n(),r("input",{key:t.id,type:"checkbox",class:"form-checkbox h-4 w-4 text-blue-500 rounded","onUpdate:modelValue":o[9]||(o[9]=N=>c(s).student_ids=N),value:t.id},null,8,lt)),[[Y,c(s).student_ids]])]),e("td",ut,p(t.seq_no),1),e("td",_t,p(t.student_id),1),e("td",pt,p(t.full_name),1),e("td",mt,p(t.course?t.course.code:""),1),e("td",ft,p(t.enrollment_type),1),e("td",ht,p(t.enrollment_year),1),e("td",xt,[t.status===1?(n(),r("div",wt," Passed ")):(n(),r("div",yt," Incomplete "))]),e("td",gt,[e("a",{href:`/students/${t.id}`,class:"text-blue-500 hover:text-blue-700"},[a(K,{class:"h-4 w-4"})],8,bt),e("a",{href:`/students/${t.id}/edit`,class:"text-green-500 hover:text-green-700"},[a(O,{class:"h-4 w-4"})],8,vt),e("a",{href:`/students/${t.id}/delete`,class:"text-red-400 hover:text-red-600"},[a(Z,{class:"h-4 w-4"})],8,St)])]))),128))])])])])])]),_:1})],64)}}};export{It as default};
