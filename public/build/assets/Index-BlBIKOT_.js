import{G as N,o,c as b,h as v,T as O,q as I,f as i,a as m,u as n,w,b as e,t as c,n as k,g as h,v as S,E as Y,F as $,H as F,Z as se,i as P,d as l,B as ae,e as q,C as D,l as V,I as oe}from"./app-D8wmBy9s.js";import{_ as re}from"./AuthenticatedLayout-BNaGA4LG.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{F as K}from"./FileUploadIcon-DWI47okC.js";import{_ as ne}from"./InputError-izbhYjYb.js";import{_ as A}from"./InputLabel-C-ax2LZ2.js";import"./ThemeToggle-B3tLVrVv.js";const de={};function ie(d,_){const u=N("font-awesome-icon");return o(),b(u,{icon:"fa-solid fa-pencil"})}const le=T(de,[["render",ie]]),ce={};function ue(d,_){const u=N("font-awesome-icon");return o(),b(u,{icon:"fa-solid fa-trash"})}const ge=T(ce,[["render",ue]]),me={};function xe(d,_){const u=N("font-awesome-icon");return o(),b(u,{icon:"fa-solid fa-eye"})}const pe=T(me,[["render",xe]]),fe={};function ye(d,_){const u=N("font-awesome-icon");return o(),b(u,{icon:"fa-solid fa-download"})}const he=T(fe,[["render",ye]]),_e={};function be(d,_){const u=N("font-awesome-icon");return o(),b(u,{icon:"fa-solid fa-plus"})}const ve=T(_e,[["render",be]]),we={};function ke(d,_){const u=N("font-awesome-icon");return o(),b(u,{icon:"fa-solid fa-filter"})}const Ce=T(we,[["render",ke]]),Se={};function Pe(d,_){const u=N("font-awesome-icon");return o(),b(u,{icon:"fa-solid fa-list-dots"})}const Ne=T(Se,[["render",Pe]]),Te={key:0,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50"},$e=e("div",{class:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl flex flex-col items-center"},[e("div",{class:"relative w-16 h-16"},[e("svg",{class:"w-full h-full",viewBox:"0 0 100 100"},[e("circle",{class:"stroke-blue-500",cx:"50",cy:"50",r:"40",fill:"none","stroke-width":"3","stroke-dasharray":"251","stroke-dashoffset":"75"},[e("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"360 50 50",dur:"1.5s",repeatCount:"indefinite"})])])]),e("p",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mt-3"},"Generating Certificates")],-1),je=[$e],Me={class:"flex justify-between items-center"},Fe=e("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"}," Students ",-1),Ae={class:"flex gap-2 items-center"},Ee=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1),ze=[Ee],Be={class:"py-6"},Le={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Ue={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg mb-6"},Ie=e("h3",{class:"text-lg font-medium text-blue-800 dark:text-blue-300"},"Student Management Instructions",-1),De=e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1),Ve=[De],He={key:0,class:"p-6 text-gray-700 dark:text-gray-300"},Re=e("ul",{class:"list-disc list-inside space-y-2"},[e("li",null,[l("Use the "),e("span",{class:"font-semibold"},"Batch Upload"),l(" button above to upload multiple students at once using a CSV or Excel file.")]),e("li",null,[l("Use the "),e("span",{class:"font-semibold"},"search box"),l(" to filter students by name.")]),e("li",null,[l("Filter students by "),e("span",{class:"font-semibold"},"course"),l(", "),e("span",{class:"font-semibold"},"school year"),l(", or "),e("span",{class:"font-semibold"},"NSTP status"),l(".")]),e("li",null,[l("Click the "),e("span",{class:"font-semibold"},"Add Student"),l(" button to register new students.")]),e("li",null,[l("Select multiple students and use the "),e("span",{class:"font-semibold"},"Download Certificate"),l(" button to generate certificates for students who have passed both NSTP 1 and NSTP 2.")]),e("li",null,[l("Click on "),e("span",{class:"font-semibold"},"View"),l(" (eye icon) to see complete student details.")]),e("li",null,[l("Click on "),e("span",{class:"font-semibold"},"Edit"),l(" (pencil icon) to modify student information.")]),e("li",null,[l("Click on "),e("span",{class:"font-semibold"},"Delete"),l(" (trash icon) to remove a student from the system.")])],-1),Oe=[Re],Ye={class:"flex flex-col md:flex-row gap-4"},qe=e("div",{class:"p-4 border-b border-gray-200 dark:border-gray-700"},[e("h3",{class:"text-lg font-medium text-gray-800 dark:text-gray-200"},"Actions")],-1),Ke={class:"p-2"},Ge=e("span",null,"Add Student",-1),Xe=e("span",null,"Upload Students",-1),Je=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-3 text-purple-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),Ze=e("span",null,"NSTP Status",-1),Qe=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-3 text-indigo-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),We=e("span",null,"Refresh NSTP Status",-1),et=[Qe,We],tt={class:"p-4 border-t border-gray-200 dark:border-gray-700"},st=e("h3",{class:"text-lg font-medium text-gray-800 dark:text-gray-200 mb-3"},"Certificate Actions",-1),at=["disabled"],ot=e("span",null,"Download Certificate",-1),rt={key:0,class:"mt-3 text-sm text-gray-600 dark:text-gray-400 text-center"},nt={class:"font-medium"},dt={class:"font-medium"},it={class:"flex-grow"},lt={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg mb-4"},ct={class:"p-4"},ut={class:"flex flex-col sm:flex-row items-stretch gap-4"},gt={class:"relative flex-grow"},mt=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-400 dark:text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1),xt={key:0,class:"ml-2 bg-white text-indigo-700 px-1.5 py-0.5 rounded-full text-xs font-medium"},pt={key:0,class:"mt-4 bg-gray-50 dark:bg-gray-900 p-4 rounded-md"},ft={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4"},yt=e("option",{value:""},"All Courses",-1),ht=["value"],_t=e("option",{value:""},"All Years",-1),bt=["value"],vt=e("option",{value:""},"All Statuses",-1),wt=e("option",{value:"1"},"Passed",-1),kt=e("option",{value:"0"},"Failed",-1),Ct=e("option",{value:"2"},"Pending",-1),St=[vt,wt,kt,Ct],Pt=e("option",{value:""},"All Statuses",-1),Nt=e("option",{value:"1"},"Passed",-1),Tt=e("option",{value:"0"},"Failed",-1),$t=e("option",{value:"2"},"Pending",-1),jt=[Pt,Nt,Tt,$t],Mt=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),Ft=e("button",{type:"submit",class:"py-2 px-4 bg-blue-500 hover:bg-blue-700 text-white rounded flex items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),l(" Apply Filters ")],-1),At={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},Et={class:"overflow-x-auto"},zt={key:0,class:"w-full divide-y divide-gray-200 dark:divide-gray-700"},Bt=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},[e("span",{class:"sr-only"},"Select")]),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Seq. No. "),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Name "),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Course "),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," NSTP Type "),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," School Year "),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," NSTP 1 "),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," NSTP 2 "),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Certificate "),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Actions ")])],-1),Lt={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Ut={class:"px-4 py-3 whitespace-nowrap"},It=["value"],Dt={class:"px-4 py-3 whitespace-nowrap text-xs text-gray-900 dark:text-gray-300"},Vt=["title"],Ht={class:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300"},Rt={class:"px-4 py-3 whitespace-nowrap text-xs text-gray-900 dark:text-gray-300"},Ot={class:"px-4 py-3 whitespace-nowrap text-xs text-gray-900 dark:text-gray-300"},Yt={class:"px-4 py-3 whitespace-nowrap text-xs"},qt={class:"px-4 py-3 whitespace-nowrap text-xs"},Kt={class:"px-4 py-3 whitespace-nowrap text-xs text-gray-900 dark:text-gray-300"},Gt=["title"],Xt={key:1,class:"px-2 py-1 text-xs font-medium bg-gray-100 dark:bg-gray-600 text-gray-800 dark:text-gray-300 rounded-full"},Jt={class:"px-4 py-3 whitespace-nowrap text-sm space-x-2"},Zt=["onClick"],Qt=["href"],Wt=["onClick"],es={key:0},ts=e("td",{colspan:"11",class:"px-4 py-6 text-center text-gray-500 dark:text-gray-400"}," No students found. Please try a different search. ",-1),ss=[ts],as={key:1,class:"my-4 text-center text-xl text-gray-800 dark:text-gray-200"},os={class:"p-4 border-t border-gray-200 dark:border-gray-700"},rs={key:0,class:"flex flex-col sm:flex-row justify-between items-center"},ns={class:"text-sm text-gray-600 dark:text-gray-400 mb-4 sm:mb-0"},ds={class:"font-medium"},is={class:"font-medium"},ls={class:"font-medium"},cs={class:"inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},us=e("span",{class:"sr-only"},"Previous",-1),gs=e("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1),ms={key:1,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 dark:border-gray-700 bg-gray-100 dark:bg-gray-900 text-sm font-medium text-gray-400 cursor-not-allowed"},xs=e("span",{class:"sr-only"},"Previous",-1),ps=e("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1),fs=[xs,ps],ys={key:1,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-sm font-medium text-gray-700 dark:text-gray-400"},hs=e("span",{class:"sr-only"},"Next",-1),_s=e("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1),bs={key:3,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 dark:border-gray-700 bg-gray-100 dark:bg-gray-900 text-sm font-medium text-gray-400 cursor-not-allowed"},vs=e("span",{class:"sr-only"},"Next",-1),ws=e("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1),ks=[vs,ws],Cs={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Ss={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Ps=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1),Ns={class:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},Ts={class:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},$s={class:"sm:flex sm:items-start"},js={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Ms=e("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-100",id:"modal-title"}," Student Details ",-1),Fs={key:0,class:"mt-4 space-y-3"},As={class:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg"},Es=e("h4",{class:"font-medium text-gray-700 dark:text-gray-300"},"Personal Information",-1),zs={class:"grid grid-cols-2 gap-2 mt-2"},Bs=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Full Name",-1),Ls={class:"text-sm text-gray-800 dark:text-gray-200"},Us=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Student ID",-1),Is={class:"text-sm text-gray-800 dark:text-gray-200"},Ds=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Course",-1),Vs={class:"text-sm text-gray-800 dark:text-gray-200"},Hs=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Year Level",-1),Rs={class:"text-sm text-gray-800 dark:text-gray-200"},Os={class:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg"},Ys=e("h4",{class:"font-medium text-gray-700 dark:text-gray-300"},"NSTP Status",-1),qs={class:"grid grid-cols-2 gap-2 mt-2"},Ks=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"NSTP Type",-1),Gs={class:"text-sm text-gray-800 dark:text-gray-200"},Xs=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"School Year",-1),Js={class:"text-sm text-gray-800 dark:text-gray-200"},Zs=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"NSTP 1 Status",-1),Qs={class:"text-sm"},Ws=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"NSTP 2 Status",-1),ea={class:"text-sm"},ta={class:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg"},sa=e("h4",{class:"font-medium text-gray-700 dark:text-gray-300"},"Certificate Status",-1),aa={class:"mt-2"},oa=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Certificate Status",-1),ra={class:"text-sm"},na={key:0,class:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full"},da={key:1,class:"px-2 py-1 text-xs font-medium bg-gray-100 dark:bg-gray-600 text-gray-800 dark:text-gray-300 rounded-full"},ia={class:"bg-gray-50 dark:bg-gray-700 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},la={key:1,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},ca={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},ua=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1),ga=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1),ma={class:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},xa={class:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},pa={class:"sm:flex sm:items-start"},fa={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},ya=e("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-100",id:"modal-title"}," Certificate Information ",-1),ha={class:"mt-4"},_a={class:"bg-gray-50 dark:bg-gray-700 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Na={__name:"Index",props:{courses:{type:Array,default:[]},students:{type:Object,default:()=>({data:[],links:[],meta:{current_page:1,from:1,last_page:1,links:[],path:"",per_page:15,to:1,total:0}})},pagination:{type:Object,default:()=>({current_page:1,last_page:1,from:1,to:1,total:0,per_page:15,links:[]})},graduationYears:{type:Array,default:[]},filters:{type:Object,default:()=>({})}},setup(d){const _=v(!1),u=d,x=O({student_ids:[],certificate_date:null}),E=v(!1),g=v(null),H=v(!1),G=s=>{g.value=s,E.value=!0},X=()=>{if(x.student_ids.length===0){alert("Please select students to download certificate.");return}z.value=!0},z=v(!1),B=v(!1),L=v(!1),J=async()=>{try{if(!x.certificate_date){alert("Please select a certificate date.");return}const s=u.students.data.filter(f=>x.student_ids.includes(f.id)),a=s.filter(f=>f.first_sem_status!==1||f.second_sem_status!==1);if(a.length>0){const f=document.createElement("div");f.className="fixed top-4 right-4 bg-red-500 text-white px-4 py-2 rounded shadow-lg z-50 max-w-md",f.innerHTML=`
                <div class="font-bold mb-1">Cannot download certificates</div>
                <div>Students must pass both NSTP 1 and NSTP 2 to receive certificates.</div>
                <div class="mt-2 text-sm">
                    ${a.length} of ${s.length} selected students are not eligible.
                </div>
            `,document.body.appendChild(f),setTimeout(()=>{document.body.contains(f)&&document.body.removeChild(f)},5e3);return}_.value=!0;let t,p=!1;try{t=await F.post(route("certificates.download"),x.data(),{responseType:"blob"})}catch(f){if(f.response&&f.response.status===404){p=!0,console.log("First attempt failed with 404, trying direct URL...");try{t=await F.post("/download-certificates",x.data(),{responseType:"blob",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),"Content-Type":"application/json",Accept:"application/json"}})}catch(R){if(R.response&&R.response.status===404)console.log("Second attempt failed with 404, trying API fallback URL..."),t=await F.post("/api/download-certificates",x.data(),{responseType:"blob",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),"Content-Type":"application/json",Accept:"application/json"}});else throw R}}else throw f}const y=window.URL.createObjectURL(new Blob([t.data])),j=document.createElement("a");j.href=y,j.setAttribute("download","nstp-certificates.zip"),document.body.appendChild(j),j.click(),document.body.removeChild(j),x.reset(),z.value=!1,_.value=!1;const M=document.createElement("div");M.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded shadow-lg z-50",M.textContent="Certificates generated successfully!",document.body.appendChild(M),setTimeout(()=>{document.body.contains(M)&&document.body.removeChild(M)},3e3)}catch(s){console.error("Error downloading certificates:",s);const a=document.createElement("div");a.className="fixed top-4 right-4 bg-red-500 text-white px-4 py-3 rounded shadow-lg z-50 max-w-md";let t="Error generating certificates. Please try again.";if(s.response)if(console.log("Error response status:",s.response.status),console.log("Error response data:",s.response.data),s.response.data instanceof Blob){const p=new FileReader;p.onload=function(){try{const y=JSON.parse(p.result);y.message&&(a.innerHTML=`
                                <div class="font-bold">Error</div>
                                <div>${y.message}</div>
                            `)}catch{a.innerHTML=`
                            <div class="font-bold">Error</div>
                            <div>${t}</div>
                        `}},p.readAsText(s.response.data)}else s.response.data&&s.response.data.message?a.innerHTML=`
                    <div class="font-bold">Error</div>
                    <div>${s.response.data.message}</div>
                `:a.innerHTML=`
                    <div class="font-bold">Error ${s.response.status}</div>
                    <div>${t}</div>
                    <div class="mt-2 text-xs">The certificate download functionality may not be properly configured. Please contact support.</div>
                `;else a.innerHTML=`
                <div class="font-bold">Error</div>
                <div>${t}</div>
                <div class="mt-2 text-xs">The certificate download functionality may not be properly configured. Please contact support.</div>
            `;document.body.appendChild(a),setTimeout(()=>{document.body.contains(a)&&document.body.removeChild(a)},5e3)}},Z=async()=>{if(B.value)x.student_ids=[];else try{const s=document.createElement("div");s.className="fixed top-4 right-4 bg-blue-500 text-white px-4 py-2 rounded shadow-lg z-50",s.textContent="Loading all student IDs...",document.body.appendChild(s);const a={search:r.search,course_id:r.course_id,school_year:r.school_year,nstp1_status:r.nstp1_status,nstp2_status:r.nstp2_status},t=await F.get(route("students.all-ids",a));x.student_ids=t.data.student_ids,document.body.contains(s)&&document.body.removeChild(s);const p=document.createElement("div");p.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded shadow-lg z-50",p.textContent=`Selected ${t.data.total} students across all pages`,document.body.appendChild(p),setTimeout(()=>{document.body.contains(p)&&document.body.removeChild(p)},3e3)}catch(s){console.error("Error fetching all student IDs:",s);const a=document.createElement("div");a.className="fixed top-4 right-4 bg-red-500 text-white px-4 py-2 rounded shadow-lg z-50",a.textContent="Failed to select all students. Please try again.",document.body.appendChild(a),setTimeout(()=>{document.body.contains(a)&&document.body.removeChild(a)},3e3),x.student_ids=u.students.data?u.students.data.map(t=>t.id):[]}B.value=!B.value},r=O({search:u.filters.search||"",course_id:u.filters.course_id||"",school_year:u.filters.school_year||"",nstp1_status:u.filters.nstp1_status||"",nstp2_status:u.filters.nstp2_status||""});I(()=>r.course_id,s=>{s!==""&&C()}),I(()=>r.school_year,s=>{s!==""&&C()}),I(()=>r.nstp1_status,s=>{s!==""&&C()}),I(()=>r.nstp2_status,s=>{s!==""&&C()});const C=()=>{r.get(route("students.index"),{onStart:()=>{r.processing=!0},onFinish:()=>{r.processing=!1},preserveState:!0,preserveScroll:!0})},Q=()=>{r.search="",r.course_id="",r.school_year="",r.nstp1_status="",r.nstp2_status="",C()},W=O({}),ee=s=>{confirm("Are you sure you want to delete this student?")&&W.delete(`/students/${s}`)},te=()=>{const s=document.createElement("div");s.className="fixed top-4 right-4 bg-blue-500 text-white px-4 py-2 rounded shadow-lg z-50",s.textContent="Refreshing NSTP status data...",document.body.appendChild(s);const a=window.location.pathname+window.location.search,t=a.includes("?")?"&":"?",p=`${a}${t}format=json`;F.get(p).then(y=>{y.data.students&&y.data.students.data&&(u.students.data=[...y.data.students.data],y.data.pagination&&Object.assign(u.pagination,y.data.pagination),s.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded shadow-lg z-50",s.textContent="NSTP status data successfully refreshed!",setTimeout(()=>{document.body.contains(s)&&document.body.removeChild(s)},3e3))}).catch(y=>{console.error("Error refreshing data:",y),s.className="fixed top-4 right-4 bg-red-500 text-white px-4 py-2 rounded shadow-lg z-50",s.textContent="Failed to refresh data. Try reloading the page.",setTimeout(()=>{document.body.contains(s)&&document.body.removeChild(s)},5e3)})},U=v(!1);return v(!1),(s,a)=>(o(),i($,null,[m(n(se),{title:"Students"}),m(re,null,{header:w(()=>[e("div",Me,[Fe,e("div",Ae,[m(n(P),{href:s.route("students.upload"),class:"py-2 px-4 bg-green-500 hover:bg-green-700 text-white rounded-md flex items-center justify-center"},{default:w(()=>[m(K,{class:"h-5 w-5 mr-2"}),l(" Batch Upload ")]),_:1},8,["href"]),e("button",{onClick:a[0]||(a[0]=t=>H.value=!H.value),class:"md:hidden px-3 py-1.5 border border-gray-300 dark:border-gray-600 shadow-sm text-sm font-medium rounded-md text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700"},ze)])])]),default:w(()=>[_.value?(o(),i("div",Te,je)):h("",!0),e("div",Be,[e("div",Le,[e("div",Ue,[e("div",{onClick:a[1]||(a[1]=t=>U.value=!U.value),class:"p-4 border-b border-gray-200 dark:border-gray-700 bg-blue-50 dark:bg-blue-900/20 cursor-pointer flex justify-between items-center"},[Ie,(o(),i("svg",{class:k(["h-5 w-5 text-blue-600 dark:text-blue-400 transform transition-transform duration-200",{"rotate-180":U.value}]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Ve,2))]),U.value?(o(),i("div",He,Oe)):h("",!0)]),e("div",Ye,[e("div",{class:k([["md:block transition-all duration-300 ease-in-out",H.value?"block":"hidden"],"md:w-64 bg-white dark:bg-gray-800 shadow-sm sm:rounded-lg overflow-hidden"])},[qe,e("div",Ke,[m(n(P),{href:s.route("students.create"),class:"flex items-center p-3 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors"},{default:w(()=>[m(ve,{class:"h-5 w-5 mr-3 text-blue-500"}),Ge]),_:1},8,["href"]),m(n(P),{href:s.route("students.upload"),class:"flex items-center p-3 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors"},{default:w(()=>[m(K,{class:"h-5 w-5 mr-3 text-green-500"}),Xe]),_:1},8,["href"]),m(n(P),{href:s.route("nstp.status"),class:"flex items-center p-3 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors"},{default:w(()=>[Je,Ze]),_:1},8,["href"]),e("button",{onClick:a[2]||(a[2]=t=>te()),class:"w-full flex items-center p-3 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors"},et)]),e("div",tt,[st,e("button",{class:"w-full mb-2 py-2 px-3 bg-blue-500 hover:bg-blue-700 text-white rounded-md text-sm flex items-center justify-center",onClick:Z},[m(Ne,{class:"h-4 w-4 mr-2"}),e("span",null,c(B.value?"Deselect All":"Select All"),1)]),e("button",{onClick:X,disabled:n(x).student_ids.length===0,class:k([{"opacity-50 cursor-not-allowed":n(x).student_ids.length===0},"w-full py-2 px-3 bg-green-500 hover:bg-green-700 text-white rounded-md text-sm flex items-center justify-center"])},[m(he,{class:"h-4 w-4 mr-2"}),ot],10,at),d.students.data.length>0&&d.pagination?(o(),i("div",rt,[e("span",nt,c(n(x).student_ids.length),1),l(" of "),e("span",dt,c(d.pagination.total),1),l(" selected ")])):h("",!0)])],2),e("div",it,[e("div",lt,[e("div",ct,[e("div",ut,[e("div",gt,[mt,S(e("input",{id:"search",class:"border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm block w-full pl-10",type:"text",name:"search",placeholder:"Search students by name...","onUpdate:modelValue":a[3]||(a[3]=t=>n(r).search=t),onKeyup:ae(C,["enter"])},null,544),[[Y,n(r).search]])]),e("button",{onClick:a[4]||(a[4]=t=>L.value=!L.value),class:"py-2 px-4 bg-indigo-500 hover:bg-indigo-700 text-white rounded-md flex items-center justify-center"},[m(Ce,{class:"h-4 w-4 mr-2"}),e("span",null,c(L.value?"Hide Filters":"Filters"),1),n(r).course_id||n(r).school_year||n(r).nstp1_status||n(r).nstp2_status?(o(),i("span",xt,c((n(r).course_id?1:0)+(n(r).school_year?1:0)+(n(r).nstp1_status?1:0)+(n(r).nstp2_status?1:0)),1)):h("",!0)])]),L.value?(o(),i("div",pt,[e("form",{onSubmit:q(C,["prevent"]),method:"POST"},[e("div",ft,[e("div",null,[m(A,{for:"course",value:"Course/Program",class:"text-gray-700 dark:text-gray-300"}),S(e("select",{id:"course",class:"border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm block mt-1 w-full",name:"course_id","onUpdate:modelValue":a[5]||(a[5]=t=>n(r).course_id=t)},[yt,(o(!0),i($,null,V(d.courses,t=>(o(),i("option",{value:t.id,key:t.id},c(t.name),9,ht))),128))],512),[[D,n(r).course_id]])]),e("div",null,[m(A,{for:"school_year",value:"School Year",class:"text-gray-700 dark:text-gray-300"}),S(e("select",{id:"school_year",class:"border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm block mt-1 w-full",name:"school_year","onUpdate:modelValue":a[6]||(a[6]=t=>n(r).school_year=t)},[_t,(o(!0),i($,null,V(d.graduationYears,t=>(o(),i("option",{key:t,value:t},c(t),9,bt))),128))],512),[[D,n(r).school_year]])]),e("div",null,[m(A,{for:"nstp1_status",value:"NSTP 1 Status",class:"text-gray-700 dark:text-gray-300"}),S(e("select",{id:"nstp1_status",class:"border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm block mt-1 w-full",name:"nstp1_status","onUpdate:modelValue":a[7]||(a[7]=t=>n(r).nstp1_status=t)},St,512),[[D,n(r).nstp1_status]])]),e("div",null,[m(A,{for:"nstp2_status",value:"NSTP 2 Status",class:"text-gray-700 dark:text-gray-300"}),S(e("select",{id:"nstp2_status",class:"border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm block mt-1 w-full",name:"nstp2_status","onUpdate:modelValue":a[8]||(a[8]=t=>n(r).nstp2_status=t)},jt,512),[[D,n(r).nstp2_status]])])]),e("div",{class:"flex justify-end"},[e("button",{type:"button",onClick:Q,class:"py-2 px-4 bg-gray-500 hover:bg-gray-700 text-white rounded flex items-center mr-2"},[Mt,l(" Clear Filters ")]),Ft])],32)])):h("",!0)])]),e("div",At,[e("div",Et,[n(r).processing?(o(),i("div",as," Please wait... ")):(o(),i("table",zt,[Bt,e("tbody",Lt,[(o(!0),i($,null,V(d.students.data,t=>(o(),i("tr",{key:t.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[e("td",Ut,[S(e("input",{type:"checkbox",class:"form-checkbox h-4 w-4 text-blue-500 dark:text-blue-400 rounded dark:bg-gray-700 dark:border-gray-600","onUpdate:modelValue":a[9]||(a[9]=p=>n(x).student_ids=p),value:t.id},null,8,It),[[oe,n(x).student_ids]])]),e("td",Dt,c(t.seq_no),1),e("td",{class:"px-4 py-3 text-sm text-gray-900 dark:text-gray-300 max-w-[200px] truncate",title:t.last_name+", "+t.first_name+" "+t.middle_name},c(t.last_name+", "+t.first_name+" "+t.middle_name),9,Vt),e("td",Ht,c(t.course?t.course.code:""),1),e("td",Rt,c(t.enrollment_type),1),e("td",Ot,c(t.enrollment_year),1),e("td",Yt,[e("span",{class:k(["px-2 py-1 text-xs font-medium rounded-full",t.first_sem_status===1?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":t.first_sem_status===0?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"])},c(t.first_sem_status===1?"Passed":t.first_sem_status===0?"Failed":"Pending"),3)]),e("td",qt,[e("span",{class:k(["px-2 py-1 text-xs font-medium rounded-full",t.second_sem_status===1?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":t.second_sem_status===0?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"])},c(t.second_sem_status===1?"Passed":t.second_sem_status===0?"Failed":"Pending"),3)]),e("td",Kt,[t.certificate_printed_at?(o(),i("span",{key:0,class:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full",title:`Printed on ${new Date(t.certificate_printed_at).toLocaleString()} by ${t.certificate_printed_by}`}," Printed ",8,Gt)):(o(),i("span",Xt," Not Printed "))]),e("td",Jt,[e("button",{onClick:q(p=>G(t),["prevent"]),class:"text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300"},[m(pe,{class:"h-4 w-4"})],8,Zt),e("a",{href:`/students/${t.id}/edit`,class:"text-green-500 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300"},[m(le,{class:"h-4 w-4"})],8,Qt),e("a",{href:"#",onClick:p=>ee(t.id),class:"text-red-400 hover:text-red-600 dark:text-red-400 dark:hover:text-red-300"},[m(ge,{class:"h-4 w-4"})],8,Wt)])]))),128)),d.students.data.length===0?(o(),i("tr",es,ss)):h("",!0)])]))]),e("div",os,[d.pagination&&d.pagination.last_page>1?(o(),i("div",rs,[e("p",ns,[l(" Showing "),e("span",ds,c(d.pagination.from),1),l(" to "),e("span",is,c(d.pagination.to),1),l(" of "),e("span",ls,c(d.pagination.total),1),l(" results ")]),e("nav",cs,[d.pagination.current_page>1?(o(),b(n(P),{key:0,href:s.route("students.index",{...s.route().params,page:d.pagination.current_page-1}),class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-150"},{default:w(()=>[us,gs]),_:1},8,["href"])):(o(),i("span",ms,fs)),(o(!0),i($,null,V(d.pagination.last_page,t=>(o(),i($,{key:t},[t===1||t===d.pagination.last_page||t>=d.pagination.current_page-1&&t<=d.pagination.current_page+1?(o(),b(n(P),{key:0,href:s.route("students.index",{...s.route().params,page:t}),class:k(["relative inline-flex items-center px-4 py-2 border text-sm font-medium transition-colors duration-150",t===d.pagination.current_page?"z-10 bg-blue-50 dark:bg-blue-900 border-blue-500 dark:border-blue-600 text-blue-600 dark:text-blue-200":"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-700 text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"])},{default:w(()=>[l(c(t),1)]),_:2},1032,["href","class"])):t===2&&d.pagination.current_page>3||t===d.pagination.last_page-1&&d.pagination.current_page<d.pagination.last_page-2?(o(),i("span",ys," ... ")):h("",!0)],64))),128)),d.pagination.current_page<d.pagination.last_page?(o(),b(n(P),{key:2,href:s.route("students.index",{...s.route().params,page:d.pagination.current_page+1}),class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-150"},{default:w(()=>[hs,_s]),_:1},8,["href"])):(o(),i("span",bs,ks))])])):h("",!0)])])])])])])]),_:1}),E.value?(o(),i("div",Cs,[e("div",Ss,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:a[10]||(a[10]=t=>E.value=!1)}),Ps,e("div",Ns,[e("div",Ts,[e("div",$s,[e("div",js,[Ms,g.value?(o(),i("div",Fs,[e("div",As,[Es,e("div",zs,[e("div",null,[Bs,e("p",Ls,c(g.value.last_name+", "+g.value.first_name+" "+g.value.middle_name),1)]),e("div",null,[Us,e("p",Is,c(g.value.student_id),1)]),e("div",null,[Ds,e("p",Vs,c(g.value.course?g.value.course.name:"N/A"),1)]),e("div",null,[Hs,e("p",Rs,c(g.value.year_level),1)])])]),e("div",Os,[Ys,e("div",qs,[e("div",null,[Ks,e("p",Gs,c(g.value.enrollment_type),1)]),e("div",null,[Xs,e("p",Js,c(g.value.enrollment_year),1)]),e("div",null,[Zs,e("p",Qs,[e("span",{class:k(["px-2 py-1 text-xs font-medium rounded-full",g.value.first_sem_status===1?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":g.value.first_sem_status===0?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"])},c(g.value.first_sem_status===1?"Passed":g.value.first_sem_status===0?"Failed":"Pending"),3)])]),e("div",null,[Ws,e("p",ea,[e("span",{class:k(["px-2 py-1 text-xs font-medium rounded-full",g.value.second_sem_status===1?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":g.value.second_sem_status===0?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"])},c(g.value.second_sem_status===1?"Passed":g.value.second_sem_status===0?"Failed":"Pending"),3)])])])]),e("div",ta,[sa,e("div",aa,[oa,e("p",ra,[g.value.certificate_printed_at?(o(),i("span",na," Printed on "+c(new Date(g.value.certificate_printed_at).toLocaleString()),1)):(o(),i("span",da," Not Printed "))])])])])):h("",!0)])])]),e("div",ia,[e("button",{type:"button",onClick:a[11]||(a[11]=t=>E.value=!1),class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm"}," Close ")])])])])):h("",!0),z.value?(o(),i("div",la,[e("div",ca,[ua,ga,e("div",ma,[e("div",xa,[e("div",pa,[e("div",fa,[ya,e("div",ha,[m(A,{for:"certificate_date",value:"Certificate Date",class:"text-gray-700 dark:text-gray-300"}),S(e("input",{id:"certificate_date",type:"date",class:"border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm block mt-1 w-full","onUpdate:modelValue":a[12]||(a[12]=t=>n(x).certificate_date=t)},null,512),[[Y,n(x).certificate_date]]),m(ne,{message:n(x).errors.certificate_date,class:"mt-2"},null,8,["message"])])])])]),e("div",_a,[e("button",{type:"button",onClick:J,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 sm:ml-3 sm:w-auto sm:text-sm"}," Download "),e("button",{type:"button",onClick:a[13]||(a[13]=t=>z.value=!1),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-800 text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])])])])):h("",!0)],64))}};export{Na as default};
