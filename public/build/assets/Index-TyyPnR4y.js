import{D as f,o,c as p,T as v,h as $,f as l,a as c,u as a,w as A,F as y,Z as j,b as e,d as h,e as D,q as x,C as I,A as U,l as k,g as S,t as u,E as q}from"./app-0aOLP_0c.js";import{_ as E}from"./AuthenticatedLayout-DFWHTbGg.js";import{_ as m}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as g,a as M}from"./InputLabel-BX9B_D5m.js";const Y={};function L(i,r){const s=f("font-awesome-icon");return o(),p(s,{icon:"fa-solid fa-pencil"})}const z=m(Y,[["render",L]]),O={};function R(i,r){const s=f("font-awesome-icon");return o(),p(s,{icon:"fa-solid fa-trash"})}const Z=m(O,[["render",R]]),G={};function H(i,r){const s=f("font-awesome-icon");return o(),p(s,{icon:"fa-solid fa-eye"})}const J=m(G,[["render",H]]),K={};function Q(i,r){const s=f("font-awesome-icon");return o(),p(s,{icon:"fa-solid fa-download"})}const W=m(K,[["render",Q]]),X={};function ee(i,r){const s=f("font-awesome-icon");return o(),p(s,{icon:"fa-solid fa-file-upload"})}const te=m(X,[["render",ee]]),se={};function oe(i,r){const s=f("font-awesome-icon");return o(),p(s,{icon:"fa-solid fa-plus"})}const ce=m(se,[["render",oe]]),ne={};function ae(i,r){const s=f("font-awesome-icon");return o(),p(s,{icon:"fa-solid fa-filter"})}const ie=m(ne,[["render",ae]]),re={};function de(i,r){const s=f("font-awesome-icon");return o(),p(s,{icon:"fa-solid fa-list-dots"})}const le=m(re,[["render",de]]),_e=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Students ",-1),ue={class:"py-12"},fe={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},pe={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},me={class:"flex justify-end space-x-2 p-2"},he={href:"/students/create",type:"button",class:"py-2 px-2 bg-blue-500 hover:bg-blue-700 text-white rounded text-sm"},xe={href:"/students/upload",type:"button",class:"py-2 px-2 bg-lime-500 hover:bg-lime-700 text-white rounded text-sm"},we={class:"p-2"},ye={class:"flex mb-4"},ge={class:"w-1/2"},be={class:"flex mb-4 space-x-4"},ve={class:"w-1/3"},ke=e("option",{value:"",hidden:""}," Please Select Course ",-1),Se=["value"],Ce={class:"flex mb-4 space-x-4"},$e={class:"w-1/3"},Ae=e("option",{value:"",hidden:""}," Please Select School Year ",-1),De=["value"],Ie={type:"submit",class:"py-2 px-2 bg-blue-500 hover:bg-blue-700 text-white rounded"},Ue={class:"flex justify-start space-x-2 p-2"},Ve={key:0},Fe={class:"fixed inset-0 flex items-center justify-center z-50"},Pe={class:"bg-white rounded-lg p-8"},Be=e("h2",{class:"text-xl font-semibold mb-4"}," Download Certificate ",-1),Ne={class:"mb-4"},Te={class:"flex justify-end"},je=e("button",{type:"submit",class:"py-2 px-4 bg-indigo-500 hover:bg-indigo-700 text-white rounded text-sm"}," Download ",-1),qe=e("div",{class:"fixed inset-0 bg-black opacity-50"},null,-1),Ee={key:1,class:"w-full divide-y divide-gray-200"},Me=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-2 text-left text-sm font-medium text-gray-500 uppercase tracking-wider"}),e("th",{scope:"col",class:"px-6 py-2 text-left text-sm ont-medium text-gray-500 uppercase tracking-wider"}," Seq. No. "),e("th",{scope:"col",class:"px-6 py-2 text-left text-sm font-medium text-gray-500 uppercase tracking-wider"}," Student ID "),e("th",{scope:"col",class:"px-6 py-2 text-left text-sm font-medium text-gray-500 uppercase tracking-wider"}," Name "),e("th",{scope:"col",class:"px-6 py-2 text-left text-sm font-medium text-gray-500 uppercase tracking-wider"}," Course "),e("th",{scope:"col",class:"px-6 py-2 text-left text-sm font-medium text-gray-500 uppercase tracking-wider"}," NSTP Type "),e("th",{scope:"col",class:"px-6 py-2 text-left text-sm font-medium text-gray-500 uppercase tracking-wider"}," School Year "),e("th",{scope:"col",class:"px-6 py-2 text-left text-sm font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1),Ye={class:"bg-white divide-y divide-gray-200"},Le={class:"px-2 py-1 whitespace-nowrap"},ze=["value"],Oe={class:"px-2 py-1 whitespace-nowrap text-xs"},Re={class:"px-2 py-1 whitespace-nowrap text-xs"},Ze={class:"px-2 py-1 whitespace-nowrap text-sm"},Ge={class:"px-2 py-1 whitespace-nowrap text-sm"},He={class:"px-2 py-1 whitespace-nowrap text-xs"},Je={class:"px-2 py-1 whitespace-nowrap text-xs"},Ke={class:"px-2 py-1 whitespace-nowrap text-sm space-x-2"},Qe=["href"],We=["href"],Xe=["onClick"],et={key:2,class:"my-4 text-center text-xl"},nt={__name:"Index",props:{courses:{type:Array,default:[]},students:{type:Array,default:[]},graduationYears:{type:Array,default:[]},search:String,course_id:String,school_year:String},setup(i){const r=i,s=v({student_ids:[],certificate_date:null}),V=()=>{if(s.student_ids.length===0){alert("Please select students to download certificate.");return}w.value=!0},w=$(!1),b=$(!1),F=async()=>{try{const _=await axios.post(route("certificates.download"),s.data(),{responseType:"blob"}),n=window.URL.createObjectURL(new Blob([_.data])),t=document.createElement("a");t.href=n,t.setAttribute("download","certificates.zip"),document.body.appendChild(t),t.click(),document.body.removeChild(t),s.reset(),w.value=!1}catch(_){console.error("Error downloading certificates:",_)}},P=()=>{b.value?s.student_ids=[]:s.student_ids=r.students.map(_=>_.id),b.value=!b.value},d=v({search:r.search||"",course_id:r.course_id||"",school_year:r.school_year||""}),B=()=>{d.get(route("students.index"),{onStart:()=>{d.processing=!0},onFinish:()=>{d.processing=!1},preserveState:!0,preserveScroll:!0})},N=v({}),T=_=>{confirm("Are you sure you want to delete this student?")&&N.delete(`/students/${_}`)};return(_,n)=>(o(),l(y,null,[c(a(j),{title:"Students"}),c(E,null,{header:A(()=>[_e]),default:A(()=>[e("div",ue,[e("div",fe,[e("div",pe,[e("div",me,[e("a",he,[c(ce,{class:"h-4 w-5"}),h(" Add Student")]),e("a",xe,[c(te,{class:"h-4 w-5"}),h(" Batch Upload")])]),e("div",we,[e("form",{onSubmit:D(B,["prevent"]),method:"POST"},[e("div",ye,[e("div",ge,[c(g,{for:"search",value:"Search"}),x(e("input",{id:"search",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm block mt-1 w-full",type:"text",name:"search",placeholder:"Search","onUpdate:modelValue":n[0]||(n[0]=t=>a(d).search=t)},null,512),[[I,a(d).search]])])]),e("div",be,[e("div",ve,[c(g,{for:"course",value:"Course/Program"}),x(e("select",{id:"course",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm block mt-1 w-full",name:"course_id","onUpdate:modelValue":n[1]||(n[1]=t=>a(d).course_id=t),required:""},[ke,(o(!0),l(y,null,k(i.courses,t=>(o(),l("option",{value:t.id,key:t.id},u(t.name),9,Se))),128))],512),[[U,a(d).course_id]])])]),e("div",Ce,[e("div",$e,[c(g,{for:"school_year",value:"School Year"}),x(e("select",{id:"school_year",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm block mt-1 w-full",name:"school_year",value:"","onUpdate:modelValue":n[2]||(n[2]=t=>a(d).school_year=t)},[Ae,(o(!0),l(y,null,k(i.graduationYears,t=>(o(),l("option",{key:t,value:t},u(t),9,De))),128))],512),[[U,a(d).school_year]])])]),e("button",Ie,[h(" Filter "),c(ie,{class:"h-4 w-4"})])],32)]),e("div",Ue,[e("button",{onClick:P,type:"button",class:"py-2 px-2 bg-gray-500 hover:bg-gray-700 text-white rounded text-sm"},[c(le,{class:"h-4 w-4"}),h(" Select all ")]),e("a",{href:"#",onClick:V,id:"downloadCertificateButton",class:"py-2 px-2 bg-indigo-500 hover:bg-indigo-700 text-white rounded text-sm"},[c(W,{class:"h-4 w-4"}),h(" Download Certificate ")])]),w.value?(o(),l("div",Ve,[e("div",Fe,[e("div",Pe,[Be,e("form",{onSubmit:D(F,["prevent"])},[e("div",Ne,[c(g,{for:"certificate_date",value:"Certificate Date"}),x(e("input",{id:"certificate_date","onUpdate:modelValue":n[3]||(n[3]=t=>a(s).certificate_date=t),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm block mt-1 w-full",type:"date",required:""},null,512),[[I,a(s).certificate_date]]),c(M,{class:"mt-2",message:a(s).errors.certificate_date},null,8,["message"])]),e("div",Te,[e("button",{type:"button",class:"py-2 px-4 bg-gray-500 hover:bg-gray-700 text-white rounded text-sm mr-2",onClick:n[4]||(n[4]=t=>w.value=!1)}," Cancel "),je])],32)])]),qe])):S("",!0),a(d).processing?S("",!0):(o(),l("table",Ee,[Me,e("tbody",Ye,[(o(!0),l(y,null,k(i.students,t=>(o(),l("tr",{key:t.id},[e("td",Le,[x((o(),l("input",{key:t.id,type:"checkbox",class:"form-checkbox h-4 w-4 text-blue-500 rounded","onUpdate:modelValue":n[5]||(n[5]=C=>a(s).student_ids=C),value:t.id},null,8,ze)),[[q,a(s).student_ids]])]),e("td",Oe,u(t.seq_no),1),e("td",Re,u(t.student_id),1),e("td",Ze,u(t.last_name+", "+t.first_name+" "+t.middle_name),1),e("td",Ge,u(t.course?t.course.code:""),1),e("td",He,u(t.enrollment_type),1),e("td",Je,u(t.enrollment_year),1),e("td",Ke,[e("a",{href:`/students/${t.id}`,class:"text-blue-500 hover:text-blue-700"},[c(J,{class:"h-4 w-4"})],8,Qe),e("a",{href:`/students/${t.id}/edit`,class:"text-green-500 hover:text-green-700"},[c(z,{class:"h-4 w-4"})],8,We),e("a",{href:"#",onClick:C=>T(t.id),class:"text-red-400 hover:text-red-600"},[c(Z,{class:"h-4 w-4"})],8,Xe)])]))),128))])])),a(d).processing?(o(),l("p",et,"Please wait...")):S("",!0)])])])]),_:1})],64))}};export{nt as default};
