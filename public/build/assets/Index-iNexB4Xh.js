import{T as C,j as m,B as S,o as d,f as i,a as x,u as l,w as _,F as h,Z as A,b as e,k as f,e as D,q as y,C as B,g as E,t as c,D as j}from"./app-CS1NS4lt.js";import{_ as N}from"./AuthenticatedLayout-BLRMUcWF.js";import"./ApplicationLogo-Bpc25SVc.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const T=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Students ",-1),q={class:"py-12"},U={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},V={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},$=e("div",{class:"flex justify-end space-x-2 p-2"},[e("a",{href:"/students/create",type:"button",class:"py-2 px-4 bg-blue-500 text-white rounded text-sm"},"Add Student"),e("a",{href:"/students/upload",type:"button",class:"py-2 px-4 bg-lime-500 text-white rounded text-sm"},"Batch Upload")],-1),F={class:"p-2"},I={method:"GET",action:""},M=e("div",{class:"mb-4"},[e("label",{for:"search",value:"Search"}),e("input",{id:"search",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm block mt-1 w-full",type:"text",name:"search",placeholder:"Search",value:""})],-1),P={class:"mb-4"},L=e("label",{for:"course",value:"Course/Program"},null,-1),z={id:"course",class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm block mt-1 w-full",name:"course_id",value:"",required:""},R=e("option",{value:"0"}," Please Select Course ",-1),Y=["value"],G=e("button",{type:"submit",class:"py-2 px-4 bg-blue-500 text-white rounded"}," Filter ",-1),O={key:0},Z={class:"fixed inset-0 flex items-center justify-center z-50"},H={class:"bg-white rounded-lg p-8"},J=e("h2",{class:"text-xl font-semibold mb-4"}," Download Certificate ",-1),K={class:"mb-4"},Q=e("label",{for:"search",value:"Search"},null,-1),W={class:"flex justify-end"},X=e("button",{type:"submit",class:"py-2 px-4 bg-indigo-500 text-white rounded text-sm"}," Download ",-1),ee=e("div",{class:"fixed inset-0 bg-black opacity-50"},null,-1),te={class:"w-full divide-y divide-gray-200"},se=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-2 text-left text-sm font-medium text-gray-500 uppercase tracking-wider"}),e("th",{scope:"col",class:"px-6 py-2 text-left text-sm ont-medium text-gray-500 uppercase tracking-wider"}," Seq. No. "),e("th",{scope:"col",class:"px-6 py-2 text-left text-sm font-medium text-gray-500 uppercase tracking-wider"}," Student ID "),e("th",{scope:"col",class:"px-6 py-2 text-left text-sm font-medium text-gray-500 uppercase tracking-wider"}," Name "),e("th",{scope:"col",class:"px-6 py-2 text-left text-sm font-medium text-gray-500 uppercase tracking-wider"}," Course "),e("th",{scope:"col",class:"px-6 py-2 text-left text-sm font-medium text-gray-500 uppercase tracking-wider"}," NSTP Type "),e("th",{scope:"col",class:"px-6 py-2 text-left text-sm font-medium text-gray-500 uppercase tracking-wider"}," School Year "),e("th",{scope:"col",class:"px-6 py-2 text-left text-sm font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1),oe={class:"bg-white divide-y divide-gray-200"},ae={class:"px-2 py-1 whitespace-nowrap"},de=["value"],ie={class:"px-2 py-1 whitespace-nowrap text-xs"},ce={class:"px-2 py-1 whitespace-nowrap text-xs"},re={class:"px-2 py-1 whitespace-nowrap text-sm"},le={class:"px-2 py-1 whitespace-nowrap text-sm"},ne={class:"px-2 py-1 whitespace-nowrap text-xs"},pe={class:"px-2 py-1 whitespace-nowrap text-xs"},ue={class:"px-2 py-1 whitespace-nowrap text-sm space-x-2"},xe=["href"],he=["href"],me=["href"],we={__name:"Index",props:{courses:{type:Array,default:[]},students:{type:Array,default:[]},graduationYears:{type:Array,default:[]}},setup(p){const g=p,s=C({student_ids:[],certificate_date:null}),w=()=>{if(s.student_ids.length===0){alert("Please select students to download certificate.");return}n.value=!0},n=m(!1),u=m(!1),b=async()=>{try{const r=await axios.post(route("certificates.download"),s.data(),{responseType:"blob"}),o=window.URL.createObjectURL(new Blob([r.data])),a=document.createElement("a");a.href=o,a.setAttribute("download","certificates.zip"),document.body.appendChild(a),a.click(),document.body.removeChild(a),s.reset(),n.value=!1}catch(r){console.error("Error downloading certificates:",r)}},v=()=>{u.value?s.student_ids=[]:s.student_ids=g.students.map(r=>r.id),u.value=!u.value};return(r,o)=>{const a=S("InputError");return d(),i(h,null,[x(l(A),{title:"Students"}),x(N,null,{header:_(()=>[T]),default:_(()=>[e("div",q,[e("div",U,[e("div",V,[$,e("div",F,[e("form",I,[M,e("div",P,[L,e("select",z,[R,(d(!0),i(h,null,f(p.courses,t=>(d(),i("option",{value:t.id,key:t.id},c(t.name),9,Y))),128))])]),G])]),e("div",{class:"flex justify-start space-x-2 p-2"},[e("button",{onClick:v,type:"button",class:"py-2 px-4 bg-gray-500 text-white rounded text-sm"}," Select all "),e("a",{href:"#",onClick:w,id:"downloadCertificateButton",class:"py-2 px-4 bg-indigo-500 text-white rounded text-sm"},"Download Certificate")]),n.value?(d(),i("div",O,[e("div",Z,[e("div",H,[J,e("form",{onSubmit:D(b,["prevent"])},[e("div",K,[Q,y(e("input",{id:"certificate_date","onUpdate:modelValue":o[0]||(o[0]=t=>l(s).certificate_date=t),class:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm block mt-1 w-full",type:"date",required:""},null,512),[[B,l(s).certificate_date]]),x(a,{class:"mt-2",message:l(s).errors.certificate_date},null,8,["message"])]),e("div",W,[e("button",{type:"button",class:"py-2 px-4 bg-gray-500 text-white rounded text-sm mr-2",onClick:o[1]||(o[1]=t=>n.value=!1)}," Cancel "),X])],32)])]),ee])):E("",!0),e("table",te,[se,e("tbody",oe,[(d(!0),i(h,null,f(p.students,t=>(d(),i("tr",{key:t.id},[e("td",ae,[y((d(),i("input",{key:t.id,type:"checkbox",class:"form-checkbox h-4 w-4 text-blue-500 rounded","onUpdate:modelValue":o[2]||(o[2]=k=>l(s).student_ids=k),value:t.id},null,8,de)),[[j,l(s).student_ids]])]),e("td",ie,c(t.seq_no),1),e("td",ce,c(t.student_id),1),e("td",re,c(t.full_name),1),e("td",le,c(t.course?t.course.code:""),1),e("td",ne,c(t.enrollment_type),1),e("td",pe,c(t.enrollment_year),1),e("td",ue,[e("a",{href:`/students/${t.id}`,class:"text-blue-600 hover:text-green-900"},"Show",8,xe),e("a",{href:`/students/${t.id}/edit`,class:"text-green-600 hover:text-green-900"},"Edit",8,he),e("a",{href:`/students/${t.id}/delete`,class:"text-red-600 hover:text-red-900"},"Delete",8,me)])]))),128))])])])])])]),_:1})],64)}}};export{we as default};
